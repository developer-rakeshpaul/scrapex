---
title: scrape()
description: Main function to scrape a URL and extract structured data.
---

The primary function for scraping web pages by URL.

## Signature

```typescript
function scrape(url: string, options?: ScrapeOptions): Promise<ScrapedData>
```

## Parameters

### url

- **Type:** `string`
- **Required:** Yes

The URL to scrape. Must be a valid HTTP or HTTPS URL.

### options

- **Type:** `ScrapeOptions`
- **Required:** No

| Option | Type | Default | Description |
|--------|------|---------|-------------|
| `timeout` | `number` | `10000` | Request timeout in milliseconds |
| `userAgent` | `string` | Default UA | Custom User-Agent string |
| `extractContent` | `boolean` | `true` | Extract full content with Readability |
| `maxContentLength` | `number` | `50000` | Max content length to process |
| `fetcher` | `Fetcher` | `defaultFetcher` | Custom fetcher (Puppeteer/Playwright) |
| `extractors` | `Extractor[]` | `createDefaultExtractors()` | Custom extractor pipeline |
| `replaceDefaultExtractors` | `boolean` | `false` | Replace default extractor set |
| `respectRobots` | `boolean` | `false` | Respect robots.txt rules |
| `llm` | `LLMProvider` | `undefined` | LLM provider for enhancements |
| `enhance` | `EnhancementType[]` | `undefined` | LLM enhancement types |
| `extract` | `ExtractionSchema` | `undefined` | LLM structured extraction schema |

## Returns

Returns a `Promise<ScrapedData>` with the extracted data.

```typescript
interface ScrapedData {
  url: string;
  canonicalUrl: string;
  domain: string;
  title: string;
  description: string;
  image?: string;
  favicon?: string;
  content: string;
  textContent: string;
  excerpt: string;
  wordCount: number;
  author?: string;
  publishedAt?: string;
  modifiedAt?: string;
  siteName?: string;
  language?: string;
  contentType: ContentType;
  keywords: string[];
  jsonLd?: Record<string, unknown>[];
  links?: ExtractedLink[];
  custom?: Record<string, unknown>;
  scrapedAt: string;
  scrapeTimeMs: number;
  error?: string;

  // LLM-enhanced fields (when llm + enhance/extract is provided)
  summary?: string;
  suggestedTags?: string[];
  entities?: ExtractedEntities;
  extracted?: Record<string, unknown>;
}
```

## Examples

### Basic Usage

```typescript
import { scrape } from 'scrapex';

const result = await scrape('https://example.com/article');

console.log(result.title);
console.log(result.content);
console.log(result.links);
```

### With Options

```typescript
const result = await scrape('https://example.com', {
  timeout: 10000,
  userAgent: 'MyBot/1.0',
  respectRobots: true,
});
```

### With LLM Enhancement

```typescript
import { scrape } from 'scrapex';
import { createOpenAI } from 'scrapex/llm';

const provider = createOpenAI({ apiKey: process.env.OPENAI_API_KEY });

const result = await scrape('https://example.com', {
  llm: provider,
  enhance: ['summarize', 'entities'],
});

console.log(result.summary);
console.log(result.entities);
```

### With Custom Extractors

```typescript
import { scrape, createDefaultExtractors } from 'scrapex';
import { MyCustomExtractor } from './extractors';

const result = await scrape('https://example.com', {
  extractors: [...createDefaultExtractors(), new MyCustomExtractor()],
});

console.log(result.custom?.myData);
```

## Error Handling

```typescript
import { scrape, ScrapeError } from 'scrapex';

try {
  const result = await scrape('https://example.com');
} catch (error) {
  if (error instanceof ScrapeError) {
    console.log(error.code);       // 'FETCH_FAILED', 'TIMEOUT', etc.
    console.log(error.message);    // Error description
    console.log(error.statusCode); // HTTP status if applicable
    console.log(error.isRetryable()); // true for transient errors
  }
}
```

## See Also

- [scrapeHtml()](/api/scrape-html) - Scrape from HTML string
- [ScrapeOptions](/api/types#scrapeoptions) - Full options reference
- [ScrapedData](/api/types#scrapeddata) - Full response reference
