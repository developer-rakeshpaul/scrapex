---
title: Extractors
description: API reference for built-in extractors and the Extractor interface.
---

Extractors are responsible for parsing HTML and extracting structured data.

## Extractor Interface

```typescript
interface Extractor {
  readonly name: string;
  readonly priority?: number;
  extract(context: ExtractionContext): Promise<Partial<ScrapedData>>;
}
```

### Properties

| Property | Type | Description |
|----------|------|-------------|
| `name` | `string` | Unique identifier for the extractor |
| `priority` | `number` | Optional execution order (higher runs first) |

### Methods

#### extract(context)

Main extraction method. Returns partial data to merge into the result.

- **Parameters:** `context: ExtractionContext`
- **Returns:** `Promise<Partial<ScrapedData>>`

## ExtractionContext

```typescript
interface ExtractionContext {
  url: string;             // Original URL being scraped
  finalUrl: string;        // Final URL after redirects
  html: string;            // Raw HTML
  $: CheerioAPI;           // Cheerio instance for DOM queries
  getDocument(): Document; // Lazy JSDOM document
  results: Partial<ScrapedData>;
  options: ScrapeOptions;  // Options passed to scrape()
}
```

## Built-in Extractors

### MetaExtractor

**Priority:** 100

Extracts metadata from HTML `<head>`:

- Title from `<title>` and Open Graph
- Description from meta tags
- Author from meta tags and `<link rel="author">`
- Published date from various meta formats
- Site name, favicon, language

```typescript
import { MetaExtractor } from 'scrapex/extractors';
```

### ContentExtractor

**Priority:** 50

Extracts main content using Readability algorithm:

- Main article content (Markdown)
- Plain text content
- Excerpt
- Byline detection

```typescript
import { ContentExtractor } from 'scrapex/extractors';
```

### JsonLdExtractor

**Priority:** 80

Parses JSON-LD structured data:

- Article metadata
- Product information
- Person/Organization data
- Event details

Supports multiple `@type` values including Article, NewsArticle, BlogPosting, Product, and more.

```typescript
import { JsonLdExtractor } from 'scrapex/extractors';
```

### FaviconExtractor

**Priority:** 70

Extracts favicon URL from multiple sources:

- `<link rel="icon">` and `<link rel="shortcut icon">`
- Apple touch icons
- Manifest icons
- Falls back to `/favicon.ico`

```typescript
import { FaviconExtractor } from 'scrapex/extractors';
```

### LinksExtractor

**Priority:** 30

Extracts and categorizes links:

- Internal vs external links
- Link text and relationship
- Filters navigation/boilerplate links

```typescript
import { LinksExtractor } from 'scrapex/extractors';
```

## createDefaultExtractors

Array of all built-in extractors in priority order:

```typescript
import { createDefaultExtractors } from 'scrapex';

const extractors = createDefaultExtractors();
```

## Creating Custom Extractors

```typescript
import type { Extractor, ExtractionContext, ScrapedData } from 'scrapex';

class VideoExtractor implements Extractor {
  readonly name = 'video';
  readonly priority = 60;

  async extract(context: ExtractionContext): Promise<Partial<ScrapedData>> {
    const { $ } = context;

    if ($('video, iframe[src*="youtube"], iframe[src*="vimeo"]').length === 0) {
      return {};
    }

    const videos = $('video source, iframe[src*="youtube"], iframe[src*="vimeo"]')
      .map((_, el) => {
        const $el = $(el);
        return {
          src: $el.attr('src') || $el.parent().attr('src'),
          type: $el.attr('type') || 'video/embed',
        };
      })
      .get();

    return {
      custom: { videos },
    };
  }
}
```

## Using Custom Extractors

```typescript
import { scrape, createDefaultExtractors } from 'scrapex';

// Add to defaults
const extractors = [...createDefaultExtractors(), new VideoExtractor()];

// Or replace entirely
const extractors = [
  new MetaExtractor(),
  new VideoExtractor(),
];

const result = await scrape(url, { extractors });
```

## Extractor Execution

1. Extractors are sorted by priority (highest first)
2. For each extractor:
   - `extract()` is called
   - Returned data is merged into the result
3. Later extractors can override earlier data

## See Also

- [Custom Extractors Guide](/guides/custom-extractors) - Detailed guide
- [Types Reference](/api/types) - Full type definitions
