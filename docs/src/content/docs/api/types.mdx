---
title: Types
description: Complete TypeScript type definitions for scrapex.
---

Complete TypeScript type definitions for scrapex.

## Core Types

### ScrapedData

The main result type returned by `scrape()` and `scrapeHtml()`.

```typescript
interface ScrapedData {
  // Identity
  url: string;
  canonicalUrl: string;
  domain: string;

  // Basic metadata
  title: string;
  description: string;
  image?: string;
  favicon?: string;

  // Content
  content: string;      // Markdown content
  textContent: string;  // Plain text content
  excerpt: string;
  wordCount: number;

  // Context
  author?: string;
  publishedAt?: string;
  modifiedAt?: string;
  siteName?: string;
  language?: string;

  // Classification
  contentType: ContentType;
  keywords: string[];

  // Structured data
  jsonLd?: Record<string, unknown>[];

  // Links
  links?: ExtractedLink[];

  // LLM-enhanced fields
  summary?: string;
  suggestedTags?: string[];
  entities?: ExtractedEntities;
  extracted?: Record<string, unknown>;

  // Embedding result
  embeddings?: EmbeddingResult;

  // Custom extractor data
  custom?: Record<string, unknown>;

  // Meta
  scrapedAt: string;
  scrapeTimeMs: number;
  error?: string;
}
```

### ScrapeOptions

Options for the `scrape()` and `scrapeHtml()` functions.

```typescript
interface ScrapeOptions {
  // HTTP options (scrape() only)
  timeout?: number;
  userAgent?: string;

  // Behavior
  extractContent?: boolean;
  maxContentLength?: number;
  respectRobots?: boolean;

  // Pipeline customization
  fetcher?: Fetcher;
  extractors?: Extractor[];
  replaceDefaultExtractors?: boolean;

  // LLM integration
  llm?: LLMProvider;
  enhance?: EnhancementType[];
  extract?: ExtractionSchema;

  // Embeddings
  embeddings?: EmbeddingOptions;
}
```

### ContentType

Content type classification for scraped URLs.

```typescript
type ContentType =
  | 'article'
  | 'repo'
  | 'docs'
  | 'package'
  | 'video'
  | 'tool'
  | 'product'
  | 'unknown';
```

### ExtractedEntities

Entities extracted by LLM enhancement.

```typescript
interface ExtractedEntities {
  people: string[];
  organizations: string[];
  technologies: string[];
  locations: string[];
  concepts: string[];
}
```

### ExtractedLink

Information about an extracted link.

```typescript
interface ExtractedLink {
  url: string;
  text: string;
  isExternal: boolean;
}
```

## Extractor Types

### Extractor

Interface for content extractors.

```typescript
interface Extractor {
  readonly name: string;
  readonly priority?: number;

  extract(context: ExtractionContext): Promise<Partial<ScrapedData>>;
}
```

### ExtractionContext

Context passed to extractors.

```typescript
interface ExtractionContext {
  url: string;
  finalUrl: string;
  html: string;
  $: CheerioAPI;
  getDocument(): Document;
  results: Partial<ScrapedData>;
  options: ScrapeOptions;
}
```

## Fetcher Types

### Fetcher

```typescript
interface Fetcher {
  readonly name: string;
  fetch(url: string, options: FetchOptions): Promise<FetchResult>;
}
```

### FetchOptions

```typescript
interface FetchOptions {
  timeout?: number;
  userAgent?: string;
  headers?: Record<string, string>;
}
```

### FetchResult

```typescript
interface FetchResult {
  html: string;
  finalUrl: string;
  statusCode: number;
  contentType: string;
  headers?: Record<string, string>;
}
```

## LLM Types

### LLMProvider

Interface for LLM providers.

```typescript
interface LLMProvider {
  readonly name: string;
  complete(prompt: string, options?: CompletionOptions): Promise<string>;
  completeJSON<T>(prompt: string, schema: unknown): Promise<T>;
}
```

### CompletionOptions

Options for LLM completions.

```typescript
interface CompletionOptions {
  maxTokens?: number;
  temperature?: number;
  systemPrompt?: string;
}
```

Preset factory options are documented in the
[LLM Providers API](/api/llm-providers).

### AnthropicConfig

Options for `createAnthropic()`.

```typescript
interface AnthropicConfig {
  apiKey?: string;
  model?: string;
}
```

### AskOptions

Options for the `ask()` function.

```typescript
interface AskOptions {
  /** Key to store the result under in custom field */
  key?: string;
  /** Schema for structured response */
  schema?: ExtractionSchema;
}
```

### ExtractionSchema

Schema for structured LLM extraction.

```typescript
type ExtractionSchemaType =
  | 'string'
  | 'number'
  | 'boolean'
  | 'string[]'
  | 'number[]'
  | `${string}?`; // Optional fields

type ExtractionSchema = Record<string, ExtractionSchemaType>;
```

### EnhancementType

Supported enhancement types for `scrape()`:

```typescript
type EnhancementType = 'summarize' | 'tags' | 'entities' | 'classify';
```

## Parser Types

### ParsedMarkdown

Result from `MarkdownParser.parse()`.

```typescript
interface ParsedMarkdown {
  title?: string;
  description?: string;
  sections: MarkdownSection[];
  links: MarkdownLink[];
  codeBlocks: CodeBlock[];
  frontmatter?: Record<string, unknown>;
}
```

### MarkdownSection

A Markdown section (heading + content).

```typescript
interface MarkdownSection {
  level: number;
  title: string;
  content: string;
  links: MarkdownLink[];
}
```

### MarkdownLink

A link extracted from Markdown.

```typescript
interface MarkdownLink {
  url: string;
  text: string;
  title?: string;
  context?: string;
}
```

### CodeBlock

A code block extracted from Markdown.

```typescript
interface CodeBlock {
  language?: string;
  code: string;
  meta?: string;
}
```

## Error Types

### ScrapeError

Custom error class for scraping failures.

```typescript
class ScrapeError extends Error {
  readonly code: ScrapeErrorCode;
  readonly statusCode?: number;

  static from(error: unknown, code?: ScrapeErrorCode): ScrapeError;
  isRetryable(): boolean;
  toJSON(): Record<string, unknown>;
}
```

### ScrapeErrorCode

Possible error codes.

```typescript
type ScrapeErrorCode =
  | 'FETCH_FAILED'
  | 'TIMEOUT'
  | 'INVALID_URL'
  | 'BLOCKED'
  | 'NOT_FOUND'
  | 'ROBOTS_BLOCKED'
  | 'PARSE_ERROR'
  | 'LLM_ERROR'
  | 'VALIDATION_ERROR';
```

## Embedding Types

### EmbeddingOptions

Options for embedding generation.

```typescript
interface EmbeddingOptions {
  provider: EmbeddingProviderConfig;
  model?: string;
  input?: EmbeddingInputConfig;
  chunking?: ChunkingConfig;
  output?: OutputConfig;
  safety?: SafetyConfig;
  cache?: EmbeddingCacheConfig;
  resilience?: ResilienceConfig;
  onChunk?: (chunk: string, embedding: number[]) => void;
  onMetrics?: (metrics: EmbeddingMetrics) => void;
}
```

### EmbeddingResult

Discriminated union for embedding results.

```typescript
type EmbeddingResult =
  | EmbeddingSuccessSingle
  | EmbeddingSuccessMultiple
  | EmbeddingSkipped;

interface EmbeddingSuccessSingle {
  status: 'success';
  aggregation: 'average' | 'max' | 'first';
  vector: number[];
  source: EmbeddingSource;
}

interface EmbeddingSuccessMultiple {
  status: 'success';
  aggregation: 'all';
  vectors: number[][];
  source: EmbeddingSource;
}

interface EmbeddingSkipped {
  status: 'skipped';
  reason: string;
  source: Partial<EmbeddingSource>;
}
```

### EmbeddingSource

Metadata about embedding generation.

```typescript
interface EmbeddingSource {
  model: string;
  chunks: number;
  tokens: number;
  checksum: string;
  cached: boolean;
  latencyMs: number;
}
```

### EmbeddingProviderConfig

Provider configuration (discriminated union).

```typescript
type EmbeddingProviderConfig =
  | { type: 'http'; config: HttpEmbeddingConfig }
  | { type: 'custom'; provider: EmbeddingProvider };
```

Use preset factories (e.g., `createOpenAIEmbedding`, `createAzureEmbedding`) with
`{ type: 'custom', provider: ... }`.

## Importing Types

```typescript
// Core types
import type {
  ScrapedData,
  ScrapeOptions,
  ExtractedLink,
  EnhancementType,
  ExtractionSchema,
} from 'scrapex';

// Extractor types
import type {
  Extractor,
  ExtractionContext,
} from 'scrapex';

// LLM types
import type {
  LLMProvider,
  CompletionOptions,
  AskOptions,
} from 'scrapex/llm';

// Parser types
import type {
  ParsedMarkdown,
  MarkdownSection,
  MarkdownLink,
  CodeBlock,
} from 'scrapex/parsers';

// Embedding types
import type {
  EmbeddingOptions,
  EmbeddingResult,
  EmbeddingProvider,
  EmbeddingProviderConfig,
  EmbeddingSource,
  EmbeddingMetrics,
  ChunkingConfig,
  SafetyConfig,
  ResilienceState,
} from 'scrapex/embeddings';
```

## See Also

- [API Reference: scrape()](/api/scrape) - Main function
- [API Reference: Extractors](/api/extractors) - Extractor API
- [API Reference: LLM Providers](/api/llm-providers) - LLM API
- [API Reference: Embeddings](/api/embeddings) - Embeddings API
