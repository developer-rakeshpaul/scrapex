---
title: LLM Providers
description: API reference for LLM provider configuration and enhancement.
---

LLM providers enable AI-powered content enhancement.

## createOpenAI()

Creates an OpenAI-compatible provider. Works with OpenAI, Azure OpenAI, Ollama, LM Studio, and other compatible APIs.

```typescript
function createOpenAI(options?: OpenAICompatibleConfig): LLMProvider
```

### Options

| Option | Type | Required | Default | Description |
|--------|------|----------|---------|-------------|
| `apiKey` | `string` | No* | `OPENAI_API_KEY` env | API key |
| `baseUrl` | `string` | No | OpenAI API | Custom endpoint |
| `model` | `string` | No | `gpt-4o-mini` | Model to use |

*Required unless using environment variable or local endpoint.

### Examples

```typescript
import { createOpenAI } from 'scrapex/llm';

// OpenAI
const openai = createOpenAI({
  apiKey: process.env.OPENAI_API_KEY,
  model: 'gpt-4o',
});

// Ollama (local)
    const ollama = createOpenAI({
      baseUrl: 'http://localhost:11434/v1',
  model: 'llama3.2',
});

// LM Studio (local)
    const lmstudio = createOpenAI({
      baseUrl: 'http://localhost:1234/v1',
  model: 'local-model',
});

// Azure OpenAI
    const azure = createOpenAI({
      apiKey: process.env.AZURE_OPENAI_KEY,
      baseUrl: 'https://your-resource.openai.azure.com/openai/deployments/your-deployment',
    });
```

## createOllama()

Create a local Ollama provider (OpenAI-compatible).

```typescript
function createOllama(config?: { model: string; port?: number }): LLMProvider
```

## createLMStudio()

Create a local LM Studio provider (OpenAI-compatible).

```typescript
function createLMStudio(config?: { model: string; port?: number }): LLMProvider
```

## AnthropicProvider

Native Anthropic Claude provider.

```typescript
class AnthropicProvider implements LLMProvider
```

### Constructor

```typescript
new AnthropicProvider(options?: AnthropicConfig)
```

### Options

| Option | Type | Required | Default | Description |
|--------|------|----------|---------|-------------|
| `apiKey` | `string` | No | `ANTHROPIC_API_KEY` env | API key |
| `model` | `string` | No | `claude-3-5-haiku-20241022` | Model to use |
| `baseUrl` | `string` | No | Anthropic API | Custom endpoint |

### Example

```typescript
import { AnthropicProvider } from 'scrapex/llm';

const anthropic = new AnthropicProvider({
  apiKey: process.env.ANTHROPIC_API_KEY,
  model: 'claude-3-5-sonnet-20241022',
});
```

## LLMProvider Interface

Implement this interface for custom providers:

```typescript
interface LLMProvider {
  complete(prompt: string, options?: CompletionOptions): Promise<string>;
  completeJSON<T>(prompt: string, schema: z.ZodType<T>, options?: CompletionOptions): Promise<T>;
}

interface CompletionOptions {
  maxTokens?: number;
  temperature?: number;
  systemPrompt?: string;
}
```

### Custom Provider Example

```typescript
class MyProvider implements LLMProvider {
  async complete(prompt: string, options?: CompletionOptions): Promise<string> {
    const response = await fetch('https://my-llm-api.com/complete', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({
        prompt,
        max_tokens: options?.maxTokens ?? 4096,
      }),
    });

    const data = await response.json();
    return data.text;
  }
}
```

## enhance()

Run LLM enhancements against scraped data.

```typescript
function enhance(
  data: ScrapedData,
  provider: LLMProvider,
  types: EnhancementType[]
): Promise<Partial<ScrapedData>>
```

### Example

```typescript
import { scrape } from 'scrapex';
import { createOpenAI, enhance } from 'scrapex/llm';

const provider = createOpenAI({ apiKey: process.env.OPENAI_API_KEY });
const data = await scrape('https://example.com');

const result = await enhance(data, provider, ['summarize', 'entities']);
```

## ask()

Ask custom questions about scraped content. Results are stored in the `custom` field.

```typescript
function ask(
  data: ScrapedData,
  provider: LLMProvider,
  prompt: string,
  options?: AskOptions
): Promise<Partial<ScrapedData>>
```

### Options

| Option | Type | Required | Default | Description |
|--------|------|----------|---------|-------------|
| `key` | `string` | No | `'response'` | Key to store result under in `custom` |
| `schema` | `ExtractionSchema` | No | - | Schema for structured response |

### Template Placeholders

Use these placeholders in your prompts:

| Placeholder | Description |
|-------------|-------------|
| `{{title}}` | Page title |
| `{{url}}` | Full URL |
| `{{content}}` | Main content |
| `{{description}}` | Meta description |
| `{{excerpt}}` | Content excerpt |
| `{{domain}}` | Hostname only |

### Examples

```typescript
import { scrape } from 'scrapex';
import { createOpenAI, ask } from 'scrapex/llm';

const provider = createOpenAI({ model: 'gpt-4o-mini' });
const data = await scrape('https://example.com/article');

// Simple question
const result = await ask(data, provider, "What is the author's main argument?", {
  key: 'mainArgument'
});
console.log(result.custom?.mainArgument);
// "The author argues that AI will transform healthcare..."

// Structured response
const result2 = await ask(data, provider, "Analyze the sentiment", {
  key: 'sentiment',
  schema: { tone: 'string', score: 'number', reasoning: 'string' }
});
console.log(result2.custom?.sentiment);
// { tone: 'optimistic', score: 0.75, reasoning: '...' }

// Using placeholders
const result3 = await ask(data, provider,
  "For the article from {{domain}}, summarize the key points about {{title}}",
  { key: 'keyPoints' }
);
```

## extract()

Extract structured data using a schema and optional custom prompt template.

```typescript
function extract<T>(
  data: ScrapedData,
  provider: LLMProvider,
  schema: ExtractionSchema,
  promptTemplate?: string
): Promise<T>
```

### Example with Custom Prompt

```typescript
import { extract } from 'scrapex/llm';

interface Product {
  name: string;
  price: number;
  inStock: boolean;
}

const products = await extract<Product[]>(data, provider, {
  name: 'string',
  price: 'number',
  inStock: 'boolean'
}, "Find all products mentioned in {{content}} from {{domain}}");
```

## Enhancement Types

Use these values in `enhance` when calling `scrape()`:

```typescript
type EnhancementType = 'summarize' | 'tags' | 'entities' | 'classify';
```

- `summarize` → `summary`
- `tags` → `suggestedTags`
- `entities` → `entities`
- `classify` → updates `contentType` when confidence is high

## See Also

- [LLM Integration Guide](/guides/llm-integration) - Detailed usage guide
- [Types Reference](/api/types) - Full type definitions
